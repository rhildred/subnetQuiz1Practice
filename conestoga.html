<html>

<head>
<style>
    .glyphicon.glyphicon-remove{
        color: red;
    }

    .glyphicon.glyphicon-ok{
        color: green;
    }
</style>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.5/angular.min.js"></script>
    <script>
        angular.module('calcApp', [])

            .controller('calcCtrl', function ($scope) {
                $scope.bCorrect = function(question){
                    if((question.bTrue && question.bSwitch == "true") || question.bFalse && question.bSwitch == "false"){
                        return false;
                    }else{
                        return true;
                    }
                }
                $scope.bIncorrect = function(question){
                    if((question.bTrue && question.bSwitch == "false") || question.bFalse && question.bSwitch == "true"){
                        return false;
                    }else{
                        return true;
                    }
                }
                $scope.fGrade = function(){
                    var nMark = 0;
                    for(var n = 0; n < $scope.questions.length; n++){
                        var oQuestion = $scope.questions[n];
                        if((oQuestion.nOctet4_1 & oQuestion.nMask4) == ( oQuestion.nOctet4_2 & oQuestion.nMask4)){
                            oQuestion.bTrue = true;
                        }else{
                            oQuestion.bFalse = true;
                        }
                        if(oQuestion.bTrue && oQuestion.bSwitch == "true"){
                            nMark++;
                        }else if(oQuestion.bFalse && oQuestion.bSwitch == "false"){
                            nMark++;
                        }
                    }
                    $scope.sMark = nMark + "/" + $scope.questions.length;
                }
                $scope.fInit = function(){
                    $scope.questions = [];
                    for(var nQuestion = 0; nQuestion < 5; nQuestion++){
                        var oQuestion ={
                            nOctet1: Math.floor(Math.random() * (223-192)) + 192,
                            nOctet2: Math.floor(Math.random() * 255),
                            nOctet3: Math.floor(Math.random() * 255),
                            nOctet4_1: Math.floor(Math.random() * 255),
                            nOctet4_2: Math.floor(Math.random() * 255),
                            nCidr: Math.floor(Math.random() * (32-26)) + 24
                        }
                        oQuestion.sNetwork1 = oQuestion.nOctet1 + "." + oQuestion.nOctet2 + "." + oQuestion.nOctet3 + "." + oQuestion.nOctet4_1 + "/" +  oQuestion.nCidr;
                        oQuestion.sNetwork2 = oQuestion.nOctet1 + "." + oQuestion.nOctet2 + "." + oQuestion.nOctet3 + "." + oQuestion.nOctet4_2 + "/" +  oQuestion.nCidr;
                        oQuestion.nMask4 = 0;
                        for(var n = 0; n < oQuestion.nCidr - 24; n++){
                                oQuestion.nMask4 += Math.pow(2, 7 - n);
                        }
                        $scope.questions.push(oQuestion);

                    }
                }
                $scope.fInit();
            });

    </script>

</head>

<body ng-app="calcApp" ng-controller="calcCtrl">
    <form class="container" ng-submit="fGrade()">
        <p class="pull-right" ng-bind="sMark"></p>
        <div ng-repeat="question in questions">
            <p>{{$index + 1}}) The following 2 network addresses can be connected with a switch:</p>


            <p style="text-indent: 2em">{{question.sNetwork1}} - {{question.sNetwork2}}
                <span ng-hide="bCorrect(question)" class="glyphicon glyphicon-ok" ></span>
                <span ng-hide="bIncorrect(question)" class="glyphicon glyphicon-remove" ></span>
            </p>
    
            <div class="form-group">
                <div class="radio">
                    <label>
                      <input type="radio" ng-model="question.bSwitch" name="options{{$index}}" value=true>
                      true
                    </label>
                  </div>
                  <div class="radio">
                    <label>
                      <input type="radio" ng-model="question.bSwitch" name="options{{$index}}" value=false>
                      false
                    </label>
                  </div>            
                  <small id="defaultNetMaskHelp" class="form-text text-muted" ng-bind="sDefaultNetMaskHelp"></small>
            </div>
    
        </div>
        <p class="pull-right" ng-bind="sMark"></p>
        <button type="submit">"Mark" this</button>
        <button type="button" ng-click="fInit()">New problem</button>
    </form>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>

</html>
